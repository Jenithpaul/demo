(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{724:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var t=a(5155),s=a(2115),i=a(3761),l=a(5317),n=a(7227);function o(){let[e,r]=(0,s.useState)([]),[a,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(""),{user:h}=(0,i.A)(),g=(0,l.aU)(n.A);(0,s.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=(0,l.rJ)(g,"adminUsers"),a=(await (0,l.GG)(e)).docs.map(e=>({id:e.id,email:e.data().email}));r(a)}catch(e){console.error("Error fetching admin emails:",e),m("Failed to fetch admin emails")}finally{c(!1)}},y=async e=>{if(e.preventDefault(),a)try{let e=(0,l.rJ)(g,"adminUsers");await (0,l.gS)(e,{email:a}),o(""),p()}catch(e){console.error("Error adding admin:",e),m("Failed to add admin")}},f=async e=>{if(window.confirm("Are you sure you want to remove this admin?"))try{await (0,l.kd)((0,l.H9)(g,"adminUsers",e)),p()}catch(e){console.error("Error removing admin:",e),m("Failed to remove admin")}};return d?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):(0,t.jsx)(i.O,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 py-12",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Manage Admin Users"}),u&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-lg",children:u}),(0,t.jsx)("form",{onSubmit:y,className:"mb-8",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("input",{type:"email",value:a,onChange:e=>o(e.target.value),placeholder:"Enter admin email",className:"flex-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Admin"})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Current Admin Users"}),e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-gray-700",children:e.email}),(0,t.jsx)("button",{onClick:()=>f(e.id),className:"px-3 py-1 text-red-600 hover:text-red-800 transition-colors",children:"Remove"})]},e.id))]})]})})})})}},2007:(e,r,a)=>{Promise.resolve().then(a.bind(a,724))},3761:(e,r,a)=>{"use strict";a.d(r,{A:()=>m,AuthProvider:()=>u,O:()=>h});var t=a(5155),s=a(2115),i=a(5695),l=a(5317),n=a(6203),o=a(7227);let d=(0,s.createContext)(),c=["jenithpaul66@gmail.com","rakeshchoudhary6321@gmail.com"];function u(e){let{children:r}=e,[a,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),g=(0,i.useRouter)(),p=(0,l.aU)(o.A),y=(0,n.xI)(o.A),f=async()=>{try{let e=(0,l.rJ)(p,"adminUsers"),r=(0,l.P)(e);if((await (0,l.GG)(r)).empty){for(let r of c)await (0,l.gS)(e,{email:r});console.log("Admin users initialized")}}catch(e){console.error("Error initializing admin users:",e)}};(0,s.useEffect)(()=>{f();let e=y.onAuthStateChanged(async e=>{if(e){let r=await x(e.email),a={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:r?"admin":"user"};u(a),localStorage.setItem("user",JSON.stringify(a)),r||g.push("/")}else u(null),localStorage.removeItem("user");h(!1)});return()=>e()},[]);let x=async e=>{try{if(c.includes(e))return!0;let r=(0,l.rJ)(p,"adminUsers"),a=(0,l.P)(r,(0,l._M)("email","==",e));return!(await (0,l.GG)(a)).empty}catch(e){return console.error("Error checking admin access:",e),!1}},b=async(e,r)=>{try{if(await x(e)){let r={email:e,displayName:"Admin User",role:"admin"};return u(r),localStorage.setItem("user",JSON.stringify(r)),g.push("/admin"),!0}return!1}catch(e){return console.error("Login error:",e),!1}},v=async()=>{try{let e=new n.HF,r=await (0,n.df)(y,e);if(!await x(r.user.email))return await (0,n.CI)(y),u(null),localStorage.removeItem("user"),!1;{let e={uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL,role:"admin"};return u(e),localStorage.setItem("user",JSON.stringify(e)),g.push("/admin"),!0}}catch(e){return console.error("Google login error:",e),!1}},w=async()=>{try{await (0,n.CI)(y),u(null),localStorage.removeItem("user"),g.push("/")}catch(e){console.error("Logout error:",e)}};return(0,t.jsx)(d.Provider,{value:{user:a,setUser:u,login:b,loginWithGoogle:v,logout:w,loading:m},children:!m&&r})}function m(){let e=(0,s.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function h(e){let{children:r}=e,{user:a,loading:l}=m(),n=(0,i.useRouter)();return((0,s.useEffect)(()=>{l||a&&"admin"===a.role||n.push("/login")},[a,l,n]),l)?(0,t.jsx)("div",{children:"Loading..."}):a&&"admin"===a.role?r:null}},7227:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(3915).Wp)({apiKey:"AIzaSyCvcy_H0WmnKLnTPMnl_gcX96IArDjUvG8",authDomain:"wood-ply-5467f.firebaseapp.com",projectId:"wood-ply-5467f",storageBucket:"wood-ply-5467f.appspot.com",messagingSenderId:"11936944340",appId:"1:11936944340:web:d723588893d69d5dfb2b41"})}},e=>{var r=r=>e(e.s=r);e.O(0,[992,163,75,441,684,358],()=>r(2007)),_N_E=e.O()}]);