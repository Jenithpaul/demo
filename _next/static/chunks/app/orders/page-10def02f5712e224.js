(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{3553:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(5155),a=s(2115),l=s(3761),i=s(5317),n=s(7227);function d(){let[e,r]=(0,a.useState)([]),[s,d]=(0,a.useState)(!0),{user:o}=(0,l.A)(),c=(0,i.aU)(n.A);return((0,a.useEffect)(()=>{(async()=>{if(o)try{let e=(0,i.rJ)(c,"orders"),s=(0,i.P)(e,(0,i._M)("userId","==",o.uid),(0,i.My)("createdAt","desc")),t=(await (0,i.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));r(t)}catch(e){console.error("Error fetching orders:",e)}finally{d(!1)}})()},[o,c]),o)?s?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Loading orders..."})})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Order History"}),0===e.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("h2",{className:"text-xl text-gray-600",children:"No orders found"})}):(0,t.jsx)("div",{className:"space-y-6",children:e.map(e=>{var r;return(0,t.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",e.id.slice(-6)]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date(null==(r=e.createdAt)?void 0:r.toDate()).toLocaleDateString()})]}),(0,t.jsx)("span",{className:"px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800",children:e.status||"Completed"})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Items"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.items.map((e,r)=>(0,t.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:[e.name," x ",e.qty]}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",e.price*e.qty]})]},r))})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Total"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["₹",e.items.reduce((e,r)=>e+r.price*r.qty,0)]})]})})]})},e.id)})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Please login to view your orders"})})})})}},3761:(e,r,s)=>{"use strict";s.d(r,{A:()=>u,AuthProvider:()=>m,O:()=>x});var t=s(5155),a=s(2115),l=s(5695),i=s(5317),n=s(6203),d=s(7227);let o=(0,a.createContext)(),c=["jenithpaul66@gmail.com","rakeshchoudhary6321@gmail.com"];function m(e){let{children:r}=e,[s,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(!0),h=(0,l.useRouter)(),p=(0,i.aU)(d.A),y=(0,n.xI)(d.A),g=async()=>{try{let e=(0,i.rJ)(p,"adminUsers"),r=(0,i.P)(e);if((await (0,i.GG)(r)).empty){for(let r of c)await (0,i.gS)(e,{email:r});console.log("Admin users initialized")}}catch(e){console.error("Error initializing admin users:",e)}};(0,a.useEffect)(()=>{g();let e=y.onAuthStateChanged(async e=>{if(e){let r=await f(e.email),s={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:r?"admin":"user"};m(s),localStorage.setItem("user",JSON.stringify(s)),r||h.push("/")}else m(null),localStorage.removeItem("user");x(!1)});return()=>e()},[]);let f=async e=>{try{if(c.includes(e))return!0;let r=(0,i.rJ)(p,"adminUsers"),s=(0,i.P)(r,(0,i._M)("email","==",e));return!(await (0,i.GG)(s)).empty}catch(e){return console.error("Error checking admin access:",e),!1}},N=async(e,r)=>{try{if(await f(e)){let r={email:e,displayName:"Admin User",role:"admin"};return m(r),localStorage.setItem("user",JSON.stringify(r)),h.push("/admin"),!0}return!1}catch(e){return console.error("Login error:",e),!1}},j=async()=>{try{let e=new n.HF,r=await (0,n.df)(y,e);if(!await f(r.user.email))return await (0,n.CI)(y),m(null),localStorage.removeItem("user"),!1;{let e={uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL,role:"admin"};return m(e),localStorage.setItem("user",JSON.stringify(e)),h.push("/admin"),!0}}catch(e){return console.error("Google login error:",e),!1}},v=async()=>{try{await (0,n.CI)(y),m(null),localStorage.removeItem("user"),h.push("/")}catch(e){console.error("Logout error:",e)}};return(0,t.jsx)(o.Provider,{value:{user:s,setUser:m,login:N,loginWithGoogle:j,logout:v,loading:u},children:!u&&r})}function u(){let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function x(e){let{children:r}=e,{user:s,loading:i}=u(),n=(0,l.useRouter)();return((0,a.useEffect)(()=>{i||s&&"admin"===s.role||n.push("/login")},[s,i,n]),i)?(0,t.jsx)("div",{children:"Loading..."}):s&&"admin"===s.role?r:null}},7227:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(3915).Wp)({apiKey:"AIzaSyCvcy_H0WmnKLnTPMnl_gcX96IArDjUvG8",authDomain:"wood-ply-5467f.firebaseapp.com",projectId:"wood-ply-5467f",storageBucket:"wood-ply-5467f.appspot.com",messagingSenderId:"11936944340",appId:"1:11936944340:web:d723588893d69d5dfb2b41"})},9484:(e,r,s)=>{Promise.resolve().then(s.bind(s,3553))}},e=>{var r=r=>e(e.s=r);e.O(0,[992,163,75,441,684,358],()=>r(9484)),_N_E=e.O()}]);